<div *ngIf="todoForm" [formGroup]="todoForm" class="mb-3">
  <div class="input-group mb-3">
    <button class="btn btn-outline priority-{{ todoForm.value.priority }}-b dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Priority</button>
    <ul class="dropdown-menu">
      <li><a class="dropdown-item" (click)="changePriority(priorityEnum.LOW)">Low</a></li>
      <li><a class="dropdown-item" (click)="changePriority(priorityEnum.NORMAL)">Medium</a></li>
      <li><a class="dropdown-item" (click)="changePriority(priorityEnum.HIGH)">High</a></li>
    </ul>
    <input type="text" class="form-control" aria-label="Text input with dropdown button" formControlName="title" placeholder="Title">
  </div>

  <div class="mb-3">
    <input type="date" class="form-control mb-3" formControlName="date">
    <button class="btn" [ngClass]="todoForm.valid? 'btn-outline-primary' : 'btn-outline-secondary'" type="button" (click)="submitTodo()" [disabled]="!todoForm.valid">Add</button>
  </div>
</div>

<div *ngFor="let todo of todos; let last = last; let index = index"
     class="card mb-3 priority-{{ todo.priority }}">
  <div class="card-body d-flex align-items-center justify-content-between">
    <div>{{ todo.title }}</div>
    <div class="d-flex align-items-center">
      <div class="small text-secondary me-3">{{ todo.date | date }}</div>
      <button class="btn btn-outline-danger" type="button" (click)="deleteTodo(index)">Delete</button>
    </div>
  </div>
</div>

<button class="btn btn-outline-primary" *ngIf="todos.length > 0" type="button" (click)="goTomain()">Submit created {{todos.length > 1 ? 'todos' : 'todo'}} and return to main</button>
